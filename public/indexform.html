<!DOCTYPE html>
<html>
<head>
    <title>Password Reset</title>
    <link rel="stylesheet" type="text/css" href="/css/styleform.css">

</head>
<body>
    <h1>Password Reset</h1>

    <form class = "form" id="resetPasswordForm">
        <label for="newPassword">New Password:</label>
        <input type="password" id="newPassword" name="newPassword" required><br>

        <label for="confirmPassword">Confirm Password:</label>
        <input type="password" id="confirmPassword" name="confirmPassword" required><br>

        <button type="submit">Reset Password</button>
    </form>

    <script>
        document.getElementById('resetPasswordForm').addEventListener('submit', async function (event) {
            event.preventDefault(); // Prevent the default form submission behavior

            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const token = window.location.search;
            console.log(token,"tOKEN");
            if (newPassword !== confirmPassword) {
                alert('New Password and Confirm Password must match.');
            } else {
                // Proceed with password reset logic
                // You can use JavaScript to send a request to your backend for password reset
                // Example: fetch('/user/reset-password', { method: 'POST', body: JSON.stringify({ newPassword }) });
                const data = {
            newPassword: newPassword,
            confirmPassword: confirmPassword
            };
                try {
                const response = await fetch('http://localhost:3004/user/reset-password' +token, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                });
                console.log(response,"response...........");
                if (response.ok) {
                    const responseData = await response.json();
                    // Handle the response data as an object
                    console.log(responseData);
                } 
                // else {
                //     console.error('Email not sent');
                // }
            } catch (error) {
                console.error('Error:', error);
            }
            }
        });
    </script>
</body>
</html>
